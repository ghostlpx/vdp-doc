<h1 id="dataSource">数据源配置</h1>

一个完整的系统离不开数据的交互，为了能够让用户灵活地掌控数据，我们提出了『数据源』的概念。下面以构建一个具备『增删改查』功能的列表为例，介绍数据源的配置方法。

### ☛ 1、构建要素
``1. 查询表单``  
``2. 表格``  
``3.『新增』、『修改』和『删除』按钮``  
<br />
拖拽出上述要素，并进行布局，每个要素都有唯一的名称，初始命名方式为**『要素类型_序号』**，用户可根据实际需求自定义名称。

### ☛ 2、新建数据源
本例首先构建一个名为『列表查询』的数据源，具体配置如图2-1所示。

<div style="width:100%; text-align: center">
  <img src="/demo/setData.png" />
  <p>图 2-1 新建数据源</p>
</div>

### ☛ 3、挂载数据源
在这里，我们要明确一个问题：哪些操作涉及到数据？  

``1. 表单的查询操作会请求数据``  
``2. 表格的初始化需要请求数据``    
``3. 点击『新增』、『修改』和『删除』按钮会改变数据``  

▶ 因此，我们需要在进行以上这些操作时挂载数据源。其中，表格挂载数据源的方式如图3-1所示。

<div style="width:100%; text-align: center">
  <img src="/demo/tableData.png" />
  <p>图 3-1 表格挂载数据源</p>
</div>

表3-1对图3-1中关于表格数据出现的各项配置进行了说明。

| 选项 | 说明 |
|--------|--------|
| rowKey | 数据记录行键值key，React要求给所有组件给指定的key，因此这个属性一定要设置，否则表格会引起各种渲染错误 |
| 数据标签 | 数据源 |
| 页面加载调用 | 打开时表格在页面加载时就会拉取数据 |
| 返回值KEY | 接口返回数据的key，这里key应该指向返回数据为数组的key |

<p style="text-align:center">表 3-1 表格数据源说明</p>

▶ 按钮请求数据源的方式比较特殊，首先需要给按钮添加『onClick』点击事件，然后为事件执行时添加动作。图3-2演示了为『查询』按钮添加动作，其它按钮的添加方式与此一致，只需匹配相应的数据源即可。

<div style="width:100%; text-align: center">
  <img src="/demo/action.png" />
  <p>图 3-2 按钮动作</p>
</div>

▶ 需要注意的是，『新增』、『修改』和『删除』按钮在执行完相应的数据请求动作后还需要执行『刷新列表』动作。

<div style="width:100%; text-align: center">
  <img src="/demo/fresh.png" />
  <p>图 3-3 刷新列表</p>
</div>

