# 配置及功能  

## 1.系统设置

『设置』中包含了关于应用的基础设置和数据设置，如图1-1所示，点击**『设置』**进行相关配置。
<div style="width:100%; text-align: center">
  <img src="./demo/sysConfig.png" />
  <p>图 1-1 设置</p>
</div>

### ☛ 1.1、基础设置 {docsify-ignore}

| 设置项 | 说明 |
|--------|--------|
| 切换皮肤 | 可以为应用选择一个颜色主题，系统会自动覆盖所有组件。 |
| 边框圆角 | 同时满足diss或者pick圆角边框的人群 |
| 图表主题 | 可以随意切换应用中所用到的图表皮肤主题，满足你的设计控。 |
| 路由模式 | BrowserRouter、HashRouter和BrowserRouter，其中BrowserRouter需要服务端支持，请参考react-router中关于BrowserRouter的相关配置。  |
| 静态资源目录 | 静态资源访问路径，可以是cdn域名，或者是服务器的虚拟目录，以"/"或者"http//"开头。 |
| 全局cookieKey | 前端用来控制登录跳转的判断依据，建议配置此项，登录成功后可以在浏览器cookie中写入相关用户信息，用户定义的cookie键值应与此项保持一致。 |    
| 是否显示面包屑导航 | 面包屑导航开关，开启它会让你设计出来的应用交互更友好。 |
| 是否开启组件缓存 | 开启此配置后，应用中会加入tab选项卡来管理页面，tab之间的页面切换不会导致数据丢失，更加有利于用户操作。 |
| 是否开启顶部加载进度 | 呈现页面加载进度的顶部进度条 |
| 外部脚本和样式 | 当用户需要引入第三方脚本功能或者样式时开启，每个资源链接占据一行，如下： <br/> ```  <script type="text/javascript" src="http://webapi.amap.com/maps?v=1.4.3&key=f97bdea4aa4e078dda2e656a70719101"></script>``` <br/> ``` <link rel="stylesheet" href="/dmeta-server/css/styles.css"> ``` <br/> 表示同时引入js文件和一个外部样式表文件。 |

<p style="text-align:center">表 1-1 设置项配置说明</p>

### ☛ 1.2、数据设置 {docsify-ignore}

| 设置项 | 说明 |
|--------|--------|
| 数据服务器设置 | 调用目标服务器数据的服务器地址, 例如 http://192.168.2.1:8080 表示数据从这个服务器的8080端口获取 |
| 数据体KEY | 参考数据规范中数据体定义，默认值为"data" |
| 消息体KEY | 参考数据规范消息体定义，默认值为"msg" |
| 未登录状态 | 参考数据规范未登录状态定义，默认值为5 |
| 请求成功表达式 | 参考数据规范成功状态定义，默认值为 status !== 0  |
| 分页大小KEY | 分页时，发送给后端的页大小的参数名，默认值为pageSize |    
| 当前页数KEY | 分页时，发送给后端的页码的参数名，默认值为pageNo |
| 列表默认分页展示条数 | 定义应用中表格的每页展示条数 |

<p style="text-align:center">表 1-2 数据配置说明</p>

<br/>

## 2.管理页面

如图2-1所示，『管理页面』中存放着所有应用页面，在这里用户可以创建一个新的页面，也可以在现有模板的基础上对页面进行编辑。
<div style="width:100%; text-align: center">
  <img src="/demo/pageConfig.png" />
  <p>图 2-1 管理页面</p>
</div>

### ☛ 2.1、新建页面 {docsify-ignore}
当我们需要一个新的页面时，可以点击**『新建页面』**，用户可以在系统弹出的对话框中完善页面属性，下面的表格对各个属性的功能做了阐明。

| 设置项 | 说明 |
|--------|--------|
| 页面名称 | 必填 |
| 页面路径 | 必填，作为地址栏访问路径展示。 |
| 是否子页面 | 子页面会作为子路由区域刷新，不会整体更新页面。 |
| 是否首页 | 系统初始化加载的页面。 |
| 是否框架页 | 应用程序框架页面，所有子页面在框架路由区域展示，一个系统中只有一个框架页面。 |

<p style="text-align:center">表 2-1 新建页面配置说明</p>

<br/>

## 3.数据源

无论是表格还是图形，或者其它展现类的页面，都离不开数据。我们在设计的时候单独抽离出**『数据源』**的概念，考虑到了所有可能遇到的场景，在这里用户可以创建多个数据源以满足不同类型的需求。使用方法极其简单，在需要用到数据的组件上绑定相应的数据源即可。
<div style="width:100%; text-align: center">
  <img src="/demo/dataSource.png" />
  <p>图 3-1 数据源</p>
</div>

### ☛ 3.1 添加数据源 {docsify-ignore}
当我们需要一个新的数据源时，可以点击**『添加数据源』**，用户可以在系统弹出的对话框中配置自己所需数据源，下面的表格具体介绍数据源的配置策略。

▶ 考虑到不同场景，如表3-1所示，我们设计了6种不同类型的数据源。

| 数据源类型 | 说明 |
|--------|--------|
| 异步请求 | 调用后台接口返回的数据。 |
| 自定义值 | 用户自己定义键值对。 |
| 表格列 | 从指定的表格列中去获取行列数据。 |
| JSON串 | 用户自己去添加的JSON数据。 |
| 页面变量 | 页面中的变量名，初始化没有值，可通过动作自定义代码修改值。 |
| 地址栏参数 | 自动获取url地址参数，无需配置。 |

<p style="text-align:center">表 3-1 数据源类型说明</p>

▶ 其中，『异步请求』的配置较为丰富，表3-2对其进行了详细地阐述。

| 配置项 | 说明 |
|--------|--------|
| 请求地址 | 后台数据请求访问的url，排除域名后边的所有路径，例如 /api/app/list |
| 请求方式 | POST,GET |
| 传参方式 | 请求参数的传递方式，1、键值对（传统方式）2、（JSON串） 复杂数据结构以JSON串方式传递 |
| 参数来源 | 请求收集发送参数的来源，1、表单 2、表格列 3、页面变量 |
| 返回值key | 某些数据源没有绑定到指定组件，需要配置此key |
| 追加地址栏参数 | 开启次配置，会在发送请求时自动附带地址栏中的参数 |
| 是否分页 | 如果是后端分页，请开启此配置，开启后，请求中会附带分页相关参数 |
| pageSize | 请求页面大小，区别于系统设置中的页大小，优先级比系统设置中的高。适用场景：如某些弹窗中，因为弹窗高度问题，可以将此项值配置的小一些。 |
| 显示加载loading | 某些保存操作，如果请求时间过长，可以开启loading来等待 |
| 失败错误消息提示 | 请求中需要将对业务处理错误提示给用户，请开启次配置，比如登录反馈用户名密码错误，提交某些字段不能为空等等。 |

<p style="text-align:center">表 3-2 异步请求配置说明</p>

## 4.保存为模板

**『保存为模板』**功能赋予了用户私人订制的能力，该功能可以将用户设计的产品保存到『个人模板库』中，方便后续取用。
<div style="width:100%; text-align: center">
  <img src="/demo/saveAs.png" />
  <p>图 4-1 个人模板库</p>
</div>

## 5.其它功能

| 功能 | 说明 |
|--------|--------|
| 复制 | 复制组件 |
| 删除 | 删除组件 |
| 撤销 | 撤销上一步操作 |
| 清空 | 清空当前设计场景 |
| 预览 | 预览当前页面，只能看本页面相关，无法完成页面跳转等 |
| 完整预览 | 预览完整应用，和发布后效果基本一致 |
| 返回列表 | 返回『应用列表』页 |

<p style="text-align:center">表 5-1 其它功能说明</p>